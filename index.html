<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Migraine Tracker - ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§ü‡•ç‡§∞‡•à‡§ï‡§∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .pain-slider {
            background: linear-gradient(to right, #10b981 0%, #f59e0b 50%, #ef4444 100%);
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-up {
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .hindi-font {
            font-family: 'Noto Sans Devanagari', 'Arial Unicode MS', sans-serif;
        }
        .hidden { display: none !important; }
        .modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        .nav-button {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border: none;
            background: none;
            cursor: pointer;
        }
        .nav-button.active {
            background: rgb(237 233 254);
            color: rgb(109 40 217);
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .nav-button:not(.active) {
            color: rgb(75 85 99);
        }
        .nav-button:not(.active):hover {
            color: rgb(109 40 217);
            background: rgb(249 250 251);
        }
        .stat-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border: 1px solid rgb(243 244 246);
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .btn-primary {
            background: linear-gradient(to right, rgb(239 68 68), rgb(236 72 153));
            color: white;
            font-weight: bold;
            padding: 1rem 1.5rem;
            border-radius: 1rem;
            font-size: 1.125rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transform: scale(1);
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        .btn-primary:hover {
            background: linear-gradient(to right, rgb(220 38 38), rgb(219 39 119));
            transform: scale(1.05);
        }
        .btn-secondary {
            background: linear-gradient(to right, rgb(59 130 246), rgb(147 51 234));
            color: white;
            font-weight: bold;
            padding: 1rem 1.5rem;
            border-radius: 1rem;
            font-size: 1.125rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transform: scale(1);
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        .btn-secondary:hover {
            background: linear-gradient(to right, rgb(37 99 235), rgb(126 34 206));
            transform: scale(1.05);
        }
        .selection-button {
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            background: rgb(243 244 246);
            color: rgb(75 85 99);
        }
        .selection-button:hover {
            background: rgb(229 231 235);
        }
        .selection-button.selected {
            background: rgb(219 234 254);
            color: rgb(29 78 216);
            box-shadow: 0 0 0 2px rgb(59 130 246);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50">
    <!-- Navigation -->
    <nav class="bg-white/80 backdrop-blur-md shadow-sm border-b border-white/20 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center">
                        <span class="text-2xl">üß†</span>
                    </div>
                    <h1 id="app-title" class="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                        Migraine Tracker
                    </h1>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- Language Toggle -->
                    <div class="flex items-center space-x-2">
                        <span class="text-gray-600">üåê</span>
                        <select id="language-select" class="bg-transparent border-none text-sm text-gray-600 focus:outline-none cursor-pointer">
                            <option value="en">English</option>
                            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                        </select>
                    </div>
                    <div class="flex space-x-1">
                        <button id="nav-dashboard" class="nav-button active">
                            <span>üìä</span>
                            <span class="hidden sm:inline nav-text">Dashboard</span>
                        </button>
                        <button id="nav-analytics" class="nav-button">
                            <span>üìà</span>
                            <span class="hidden sm:inline nav-text">Analytics</span>
                        </button>
                        <button id="nav-settings" class="nav-button">
                            <span>‚öôÔ∏è</span>
                            <span class="hidden sm:inline nav-text">Settings</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pb-8">
        <!-- Dashboard View -->
        <div id="dashboard-view" class="max-w-7xl mx-auto p-4 space-y-8">
            <!-- Hero Section -->
            <div class="gradient-bg rounded-3xl p-8 text-white relative overflow-hidden">
                <div class="absolute inset-0 bg-black/20"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-between">
                        <div>
                            <h1 id="welcome-title" class="text-4xl font-bold mb-2">Welcome back! üëã</h1>
                            <p id="welcome-subtitle" class="text-lg text-purple-100 mb-6">Take control of your migraines with smart tracking and insights</p>
                            <div class="flex items-center space-x-6 text-sm">
                                <div class="flex items-center glass-effect rounded-full px-4 py-2">
                                    <div class="w-3 h-3 bg-green-400 rounded-full mr-2"></div>
                                    <span id="migraine-free-text">7 days migraine-free</span>
                                </div>
                                <div class="flex items-center glass-effect rounded-full px-4 py-2">
                                    <span class="mr-2">üïê</span>
                                    <span id="last-entry-text">Last entry: 2 days ago</span>
                                </div>
                            </div>
                        </div>
                        <div class="hidden md:block">
                            <div class="w-32 h-32 glass-effect rounded-full flex items-center justify-center">
                                <span class="text-6xl">üß†</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Decorative elements -->
                <div class="absolute top-4 right-4 w-20 h-20 bg-white/10 rounded-full"></div>
                <div class="absolute bottom-4 left-4 w-16 h-16 bg-white/10 rounded-full"></div>
            </div>

            <!-- Quick Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="stat-card animate-fade-in">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <p id="this-month-label" class="text-sm font-medium text-gray-600 mb-1">This Month</p>
                            <p id="this-month-count" class="text-3xl font-bold text-gray-900">0</p>
                            <p id="month-trend" class="text-xs mt-2 flex items-center">
                                <span id="trend-icon" class="mr-1">üìä</span>
                                <span id="trend-text">vs last month</span>
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg">
                            <span class="text-white">üìÖ</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card animate-fade-in">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <p id="avg-intensity-label" class="text-sm font-medium text-gray-600 mb-1">Avg Intensity</p>
                            <p id="avg-intensity-value" class="text-3xl font-bold text-gray-900">0</p>
                            <p id="severity-text" class="text-xs mt-2 text-gray-600">No data</p>
                        </div>
                        <div class="w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-lg">
                            <span class="text-white">üìä</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card animate-fade-in">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <p id="top-trigger-label" class="text-sm font-medium text-gray-600 mb-1">Top Trigger</p>
                            <p id="top-trigger-value" class="text-3xl font-bold text-gray-900">No data</p>
                            <p id="correlation-text" class="text-xs mt-2 text-gray-600">No correlation data</p>
                        </div>
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
                            <span class="text-white">üéØ</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Log Section -->
            <div class="bg-white rounded-3xl p-8 shadow-lg border border-gray-100 text-center">
                <div class="w-20 h-20 bg-gradient-to-r from-red-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg">
                    <span class="text-white text-4xl">+</span>
                </div>
                <h3 id="having-migraine-text" class="text-2xl font-bold text-gray-900 mb-3">Having a migraine right now?</h3>
                <p id="choose-migraine-text" class="text-gray-600 mb-8 max-w-md mx-auto">Choose how you want to log your migraine episode</p>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button id="quick-log-btn" class="btn-primary">
                        <span>+</span>
                        <span id="quick-log-text">Quick Log (1 min)</span>
                    </button>
                    
                    <button id="detailed-log-btn" class="btn-secondary">
                        <span>üìù</span>
                        <span id="detailed-entry-text">Detailed Entry</span>
                    </button>
                </div>
                
                <div class="flex items-center justify-center mt-6 text-sm text-gray-500 space-x-6">
                    <div class="flex items-center">
                        <span class="mr-1">üïê</span>
                        <span id="quick-time-text">Quick: 1 minute</span>
                    </div>
                    <div class="flex items-center">
                        <span class="mr-1">‚è±Ô∏è</span>
                        <span id="detailed-time-text">Detailed: 3-5 minutes</span>
                    </div>
                </div>
            </div>

            <!-- Recent Entries -->
            <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
                <div class="p-6 border-b border-gray-100">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mr-4">
                                <span class="text-purple-600">üìÖ</span>
                            </div>
                            <div>
                                <h2 id="recent-entries-title" class="text-xl font-semibold text-gray-900">Recent Entries</h2>
                                <p id="recent-entries-subtitle" class="text-sm text-gray-500">Your latest migraine logs and patterns</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="recent-entries-list" class="divide-y divide-gray-100">
                    <!-- Sample entries will be populated here -->
                    <div class="p-6 hover:bg-gray-50 transition-colors">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="font-semibold text-gray-900">Pain Level 7/10</span>
                                    <span class="px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">Complete</span>
                                </div>
                                <div class="text-sm text-gray-600">
                                    Today at 2:30 PM
                                </div>
                                <div class="text-sm text-gray-500 mt-1">
                                    Location: Left Side, Forehead
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics View -->
        <div id="analytics-view" class="max-w-7xl mx-auto p-4 space-y-8 hidden">
            <div class="text-center mb-8">
                <h2 id="analytics-title" class="text-3xl font-bold text-gray-900 mb-2">Analytics & Insights</h2>
                <p id="analytics-subtitle" class="text-gray-600">Understand your migraine patterns and triggers</p>
            </div>

            <!-- Treatment Effectiveness -->
            <div class="bg-white rounded-2xl p-8 shadow-lg border border-gray-100">
                <h3 id="treatment-effectiveness-title" class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                    <span class="mr-3 text-purple-600">üìä</span>
                    Treatment Effectiveness Report
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 id="medications-title" class="font-medium text-gray-700 mb-4">Medications</h4>
                        <div class="space-y-4">
                            <div class="bg-green-50 border border-green-200 rounded-xl p-4 text-center">
                                <div class="text-2xl font-bold text-green-600">75%</div>
                                <div class="text-sm font-medium text-gray-700">Sumatriptan 50mg</div>
                                <div id="used-4-times" class="text-xs text-gray-500">Used 4 times</div>
                                <div id="highly-effective" class="text-xs text-green-600 mt-1">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ Highly Effective</div>
                            </div>
                            <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-center">
                                <div class="text-2xl font-bold text-yellow-600">50%</div>
                                <div class="text-sm font-medium text-gray-700">Ibuprofen 400mg</div>
                                <div id="used-2-times" class="text-xs text-gray-500">Used 2 times</div>
                                <div id="moderately-effective" class="text-xs text-yellow-600 mt-1">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ Moderately Effective</div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 id="non-pharma-title" class="font-medium text-gray-700 mb-4">Non-Pharmacological Interventions</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                <span class="text-gray-700">'Heat Pack' provided relief in 100% of cases when used (1/1 times).</span>
                                <span class="text-green-600 font-semibold">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                <span class="text-gray-700">'Dark Room' provided relief in 80% of cases when used (4/5 times).</span>
                                <span class="text-green-600 font-semibold">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Doctor Report Section -->
            <div class="bg-white rounded-2xl p-8 shadow-lg border border-gray-100">
                <h3 id="doctor-report-title" class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                    <span class="mr-3 text-purple-600">üì•</span>
                    Exportable Doctor's Report
                </h3>
                <p id="doctor-report-desc" class="text-gray-600 mb-6">Generate a comprehensive, professional report for your healthcare provider that includes all your migraine data, patterns, and treatment responses.</p>
                
                <div class="bg-blue-50 rounded-xl p-6 mb-6">
                    <h4 id="report-includes-title" class="font-medium text-blue-800 mb-3">Report will include:</h4>
                    <ul class="text-sm text-blue-700 space-y-1">
                        <li>‚Ä¢ Migraine frequency and intensity patterns</li>
                        <li>‚Ä¢ Detailed trigger analysis with correlations</li>
                        <li>‚Ä¢ Medication effectiveness ratings</li>
                        <li>‚Ä¢ Hormonal cycle correlations (if applicable)</li>
                        <li>‚Ä¢ Sleep and lifestyle factor analysis</li>
                        <li>‚Ä¢ Visual calendar showing migraine patterns</li>
                    </ul>
                </div>
                
                <div class="flex flex-wrap gap-4">
                    <button id="generate-report-btn" class="bg-purple-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-purple-700 transition-colors flex items-center shadow-lg">
                        <span class="mr-2">üì•</span>
                        <span id="generate-report-text">Generate PDF Report</span>
                    </button>
                    <button id="email-doctor-btn" class="bg-green-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-green-700 transition-colors flex items-center shadow-lg">
                        <span class="mr-2">üìß</span>
                        <span id="email-doctor-text">Email to Doctor</span>
                    </button>
                    <button id="export-data-btn" class="bg-blue-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-blue-700 transition-colors flex items-center shadow-lg">
                        <span class="mr-2">üíæ</span>
                        <span id="export-data-text">Export Data (CSV)</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings View -->
        <div id="settings-view" class="max-w-4xl mx-auto p-4 space-y-8 hidden">
            <div class="text-center mb-8">
                <h2 id="settings-title" class="text-3xl font-bold text-gray-900 mb-2">Settings & Personalization</h2>
                <p id="settings-subtitle" class="text-gray-600">Customize your migraine tracking experience</p>
            </div>

            <div class="bg-white rounded-2xl p-8 shadow-lg border border-gray-100">
                <h3 id="my-medications-title" class="text-xl font-semibold text-gray-900 mb-6">My Medications</h3>
                
                <div class="space-y-6">
                    <div>
                        <h4 id="acute-medications-title" class="font-medium text-gray-700 mb-3">Acute/Abortive Medications</h4>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                                <span class="font-medium">Sumatriptan 50mg</span>
                                <button id="remove-btn-1" class="text-red-500 hover:text-red-700 font-medium">Remove</button>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                                <span class="font-medium">Ibuprofen 400mg</span>
                                <button id="remove-btn-2" class="text-red-500 hover:text-red-700 font-medium">Remove</button>
                            </div>
                        </div>
                        <button id="add-medication-btn" class="mt-3 text-purple-600 hover:text-purple-800 font-medium flex items-center">
                            <span class="mr-1">+</span>
                            <span id="add-medication-text">Add Medication</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Quick Log Modal -->
    <div id="quick-log-modal" class="modal-backdrop hidden">
        <div class="bg-white rounded-3xl max-w-md w-full p-8 shadow-2xl animate-slide-up">
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-gradient-to-r from-red-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-white text-2xl">‚ö†Ô∏è</span>
                </div>
                <h2 id="quick-log-modal-title" class="text-2xl font-bold text-gray-900 mb-2">Quick Log</h2>
                <p id="quick-log-modal-subtitle" class="text-gray-600">Log the essentials now, add details later when you feel better</p>
            </div>

            <div class="space-y-6">
                <!-- Exact Date and Time -->
                <div>
                    <label id="when-start-label" class="block text-sm font-medium text-gray-700 mb-3">When did it start?</label>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Date</label>
                            <input type="date" id="quick-date" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Time</label>
                            <input type="time" id="quick-time" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        <button class="selection-button selected" data-time="now" id="time-now">Now</button>
                        <button class="selection-button" data-time="5min" id="time-5min">5 mins ago</button>
                        <button class="selection-button" data-time="15min" id="time-15min">15 mins ago</button>
                        <button class="selection-button" data-time="30min" id="time-30min">30 mins ago</button>
                    </div>
                </div>

                <!-- Pain Location -->
                <div>
                    <label id="pain-location-quick-label" class="block text-sm font-medium text-gray-700 mb-3">Pain Location</label>
                    <div class="grid grid-cols-2 gap-2" id="quick-location-buttons">
                        <button class="selection-button" data-location="left_side" id="quick-loc-left">Left Side</button>
                        <button class="selection-button" data-location="right_side" id="quick-loc-right">Right Side</button>
                        <button class="selection-button" data-location="both_sides" id="quick-loc-both">Both Sides</button>
                        <button class="selection-button" data-location="forehead" id="quick-loc-forehead">Forehead</button>
                    </div>
                </div>

                <!-- Pain Character -->
                <div>
                    <label id="pain-character-label" class="block text-sm font-medium text-gray-700 mb-3">Pain Character</label>
                    <div class="grid grid-cols-2 gap-2" id="character-buttons">
                        <button class="selection-button" data-character="throbbing" id="char-throbbing">Throbbing</button>
                        <button class="selection-button" data-character="sharp" id="char-sharp">Sharp</button>
                        <button class="selection-button" data-character="dull" id="char-dull">Dull Ache</button>
                        <button class="selection-button" data-character="pressure" id="char-pressure">Pressure</button>
                    </div>
                </div>

                <div>
                    <label id="pain-intensity-label" class="block text-sm font-medium text-gray-700 mb-3">Pain Intensity</label>
                    <div class="relative">
                        <input type="range" min="1" max="10" value="5" id="pain-slider" class="w-full h-3 pain-slider rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-gray-500 mt-2">
                            <span id="mild-label">1<br/>Mild</span>
                            <span id="moderate-label">4<br/>Moderate</span>
                            <span id="severe-label">7<br/>Severe</span>
                            <span id="worst-label">10<br/>Worst</span>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <span id="pain-level-display" class="text-3xl font-bold text-gray-900">5</span>
                    </div>
                </div>

                <!-- Associated Symptoms -->
                <div>
                    <label id="quick-symptoms-label" class="block text-sm font-medium text-gray-700 mb-3">Associated Symptoms</label>
                    <div class="grid grid-cols-2 gap-2" id="quick-symptom-buttons">
                        <button class="selection-button" data-symptom="nausea" id="quick-symp-nausea">Nausea</button>
                        <button class="selection-button" data-symptom="vomiting" id="quick-symp-vomiting">Vomiting</button>
                        <button class="selection-button" data-symptom="photophobia" id="quick-symp-light">Light Sensitivity</button>
                        <button class="selection-button" data-symptom="phonophobia" id="quick-symp-sound">Sound Sensitivity</button>
                    </div>
                </div>
            </div>

            <div class="flex space-x-3 mt-8">
                <button id="quick-log-cancel" class="flex-1 bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium hover:bg-gray-300 transition-colors">Cancel</button>
                <button id="quick-log-save" class="flex-1 bg-gradient-to-r from-red-500 to-pink-500 text-white py-3 px-4 rounded-xl font-medium hover:from-red-600 hover:to-pink-600 transition-all duration-200 shadow-lg">Save Now</button>
            </div>
        </div>
    </div>

    <!-- Detailed Entry Modal -->
    <div id="detailed-log-modal" class="modal-backdrop hidden">
        <div class="bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl animate-slide-up">
            <div class="sticky top-0 bg-white rounded-t-3xl p-6 border-b border-gray-100">
                <div class="text-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">üìù</span>
                    </div>
                    <h2 id="detailed-modal-title" class="text-2xl font-bold text-gray-900 mb-2">Detailed Entry</h2>
                    <p id="detailed-modal-subtitle" class="text-gray-600">Complete migraine log with all details</p>
                </div>
            </div>

            <div class="p-6 space-y-8">
                <!-- Exact Date and Time -->
                <div>
                    <label id="detailed-when-start-label" class="block text-sm font-medium text-gray-700 mb-3">When did it start?</label>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Date</label>
                            <input type="date" id="detailed-date" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Time</label>
                            <input type="time" id="detailed-time" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- Aura -->
                <div>
                    <label id="aura-label" class="block text-sm font-medium text-gray-700 mb-3">Did you experience aura?</label>
                    <div class="grid grid-cols-2 gap-2 mb-4">
                        <button class="selection-button" data-aura="yes" id="aura-yes">Yes</button>
                        <button class="selection-button" data-aura="no" id="aura-no">No</button>
                    </div>
                    <div id="aura-details" class="hidden">
                        <label class="block text-xs text-gray-500 mb-2">Aura Details</label>
                        <div class="grid grid-cols-2 gap-2">
                            <button class="selection-button" data-aura-type="visual" id="aura-visual">Visual</button>
                            <button class="selection-button" data-aura-type="sensory" id="aura-sensory">Sensory</button>
                            <button class="selection-button" data-aura-type="speech" id="aura-speech">Speech</button>
                            <button class="selection-button" data-aura-type="motor" id="aura-motor">Motor</button>
                        </div>
                    </div>
                </div>

                <!-- Pain Level -->
                <div>
                    <label id="detailed-pain-label" class="block text-sm font-medium text-gray-700 mb-3">Pain Intensity</label>
                    <input type="range" min="1" max="10" value="5" id="detailed-pain-slider" class="w-full h-3 pain-slider rounded-lg appearance-none cursor-pointer">
                    <div class="text-center mt-2">
                        <span id="detailed-pain-display" class="text-2xl font-bold text-gray-900">5/10</span>
                    </div>
                </div>

                <!-- Location -->
                <div>
                    <label id="pain-location-label" class="block text-sm font-medium text-gray-700 mb-3">Pain Location</label>
                    <div class="grid grid-cols-2 gap-2" id="location-buttons">
                        <button class="selection-button" data-location="left_side" id="loc-left">Left Side</button>
                        <button class="selection-button" data-location="right_side" id="loc-right">Right Side</button>
                        <button class="selection-button" data-location="both_sides" id="loc-both">Both Sides</button>
                        <button class="selection-button" data-location="forehead" id="loc-forehead">Forehead</button>
                        <button class="selection-button" data-location="back_head" id="loc-back">Back of Head</button>
                        <button class="selection-button" data-location="top_head" id="loc-top">Top of Head</button>
                    </div>
                </div>

                <!-- Pain Character -->
                <div>
                    <label id="detailed-pain-character-label" class="block text-sm font-medium text-gray-700 mb-3">Pain Character</label>
                    <div class="grid grid-cols-2 gap-2" id="detailed-character-buttons">
                        <button class="selection-button" data-character="throbbing" id="detailed-char-throbbing">Throbbing</button>
                        <button class="selection-button" data-character="sharp" id="detailed-char-sharp">Sharp</button>
                        <button class="selection-button" data-character="dull" id="detailed-char-dull">Dull Ache</button>
                        <button class="selection-button" data-character="pressure" id="detailed-char-pressure">Pressure</button>
                        <button class="selection-button" data-character="burning" id="detailed-char-burning">Burning</button>
                        <button class="selection-button" data-character="stabbing" id="detailed-char-stabbing">Stabbing</button>
                    </div>
                </div>

                <!-- Triggers -->
                <div>
                    <label id="possible-triggers-label" class="block text-sm font-medium text-gray-700 mb-3">Possible Triggers</label>
                    <div class="grid grid-cols-2 gap-2" id="trigger-buttons">
                        <button class="selection-button" data-trigger="work_stress" id="trig-work">Work Stress</button>
                        <button class="selection-button" data-trigger="lack_sleep" id="trig-sleep">Lack of Sleep</button>
                        <button class="selection-button" data-trigger="weather_change" id="trig-weather">Weather Change</button>
                        <button class="selection-button" data-trigger="bright_lights" id="trig-lights">Bright Lights</button>
                        <button class="selection-button" data-trigger="loud_sounds" id="trig-sounds">Loud Sounds</button>
                        <button class="selection-button" data-trigger="certain_foods" id="trig-foods">Certain Foods</button>
                        <button class="selection-button" data-trigger="hormonal" id="trig-hormonal">Hormonal Changes</button>
                        <button class="selection-button" data-trigger="dehydration" id="trig-dehydration">Dehydration</button>
                    </div>
                </div>

                <!-- Symptoms -->
                <div>
                    <label id="associated-symptoms-label" class="block text-sm font-medium text-gray-700 mb-3">Associated Symptoms</label>
                    <div class="grid grid-cols-2 gap-2" id="symptom-buttons">
                        <button class="selection-button" data-symptom="nausea" id="symp-nausea">Nausea</button>
                        <button class="selection-button" data-symptom="vomiting" id="symp-vomiting">Vomiting</button>
                        <button class="selection-button" data-symptom="photophobia" id="symp-light">Light Sensitivity</button>
                        <button class="selection-button" data-symptom="phonophobia" id="symp-sound">Sound Sensitivity</button>
                        <button class="selection-button" data-symptom="dizziness" id="symp-dizziness">Dizziness</button>
                        <button class="selection-button" data-symptom="fatigue" id="symp-fatigue">Fatigue</button>
                        <button class="selection-button" data-symptom="confusion" id="symp-confusion">Confusion</button>
                        <button class="selection-button" data-symptom="mood_changes" id="symp-mood">Mood Changes</button>
                    </div>
                </div>

                <!-- Medications Taken -->
                <div>
                    <label id="medications-taken-label" class="block text-sm font-medium text-gray-700 mb-3">Medications Taken</label>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" id="med-sumatriptan" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500">
                            <label for="med-sumatriptan" class="text-sm text-gray-700">Sumatriptan 50mg</label>
                        </div>
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" id="med-ibuprofen" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500">
                            <label for="med-ibuprofen" class="text-sm text-gray-700">Ibuprofen 400mg</label>
                        </div>
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" id="med-acetaminophen" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500">
                            <label for="med-acetaminophen" class="text-sm text-gray-700">Acetaminophen 500mg</label>
                        </div>
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" id="med-other" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500">
                            <input type="text" id="med-other-text" placeholder="Other medication..." class="flex-1 p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- Relief Methods -->
                <div>
                    <label id="relief-methods-label" class="block text-sm font-medium text-gray-700 mb-3">What helped with relief?</label>
                    <div class="grid grid-cols-2 gap-2" id="relief-buttons">
                        <button class="selection-button" data-relief="rest" id="relief-rest">Rest/Sleep</button>
                        <button class="selection-button" data-relief="dark_room" id="relief-dark">Dark Room</button>
                        <button class="selection-button" data-relief="cold_compress" id="relief-cold">Cold Compress</button>
                        <button class="selection-button" data-relief="heat_pack" id="relief-heat">Heat Pack</button>
                        <button class="selection-button" data-relief="massage" id="relief-massage">Massage</button>
                        <button class="selection-button" data-relief="hydration" id="relief-hydration">Hydration</button>
                    </div>
                </div>

                <!-- Effectiveness Rating -->
                <div id="effectiveness-section" class="hidden">
                    <label id="effectiveness-label" class="block text-sm font-medium text-gray-700 mb-3">How effective was the treatment? (0-100%)</label>
                    <input type="range" min="0" max="100" value="50" id="effectiveness-slider" class="w-full h-3 bg-gradient-to-r from-red-500 to-green-500 rounded-lg appearance-none cursor-pointer">
                    <div class="text-center mt-2">
                        <span id="effectiveness-display" class="text-2xl font-bold text-gray-900">50%</span>
                    </div>
                </div>

                <!-- Duration -->
                <div>
                    <label id="duration-label" class="block text-sm font-medium text-gray-700 mb-3">Duration (if ended)</label>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Hours</label>
                            <input type="number" id="duration-hours" min="0" max="72" placeholder="0" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Minutes</label>
                            <input type="number" id="duration-minutes" min="0" max="59" placeholder="0" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- Notes -->
                <div>
                    <label id="notes-label" class="block text-sm font-medium text-gray-700 mb-3">Additional Notes</label>
                    <textarea id="migraine-notes" rows="3" placeholder="Any additional details about this migraine episode..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"></textarea>
                </div>
            </div>

            <div class="sticky bottom-0 bg-white rounded-b-3xl p-6 border-t border-gray-100">
                <div class="flex space-x-3">
                    <button id="detailed-cancel" class="flex-1 bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium hover:bg-gray-300 transition-colors">Cancel</button>
                    <button id="detailed-save" class="flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-xl font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg">Save Complete Entry</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Language translations
        const translations = {
            en: {
                appTitle: "Migraine Tracker",
                dashboard: "Dashboard",
                analytics: "Analytics",
                settings: "Settings",
                welcomeBack: "Welcome back! üëã",
                welcomeSubtitle: "Take control of your migraines with smart tracking and insights",
                migraineFree: "days migraine-free",
                lastEntry: "Last entry: 2 days ago",
                thisMonth: "This Month",
                avgIntensity: "Avg Intensity",
                topTrigger: "Top Trigger",
                fromLastMonth: "from last month",
                mildSeverity: "Mild severity",
                moderateSeverity: "Moderate severity",
                highSeverity: "High severity",
                correlation: "correlation",
                noData: "No data yet",
                havingMigraine: "Having a migraine right now?",
                chooseMigraine: "Choose how you want to log your migraine episode",
                quickLog: "Quick Log (1 min)",
                detailedEntry: "Detailed Entry",
                quickTime: "Quick: 1 minute",
                detailedTime: "Detailed: 3-5 minutes",
                recentEntries: "Recent Entries",
                recentSubtitle: "Your latest migraine logs and patterns",
                noEntries: "No entries yet. Log your first headache above!",
                painLevel: "Pain Level",
                complete: "Complete",
                incomplete: "Incomplete",
                location: "Location",
                quickLogTitle: "Quick Log",
                quickLogSubtitle: "Log the essentials now, add details later when you feel better",
                whenStart: "When did it start?",
                now: "Now",
                minsAgo: "mins ago",
                painIntensity: "Pain Intensity",
                mild: "Mild",
                moderate: "Moderate",
                severe: "Severe",
                worst: "Worst",
                cancel: "Cancel",
                saveNow: "Save Now",
                detailedEntryTitle: "Detailed Entry",
                detailedEntrySubtitle: "Complete migraine log with all details",
                painLocation: "Pain Location",
                possibleTriggers: "Possible Triggers",
                associatedSymptoms: "Associated Symptoms",
                saveCompleteEntry: "Save Complete Entry",
                // Pain locations
                leftSide: "Left Side",
                rightSide: "Right Side",
                bothSides: "Both Sides",
                forehead: "Forehead",
                backHead: "Back of Head",
                topHead: "Top of Head",
                // Triggers
                workStress: "Work Stress",
                lackSleep: "Lack of Sleep",
                weatherChange: "Weather Change",
                brightLights: "Bright Lights",
                loudSounds: "Loud Sounds",
                certainFoods: "Certain Foods",
                hormonal: "Hormonal Changes",
                dehydration: "Dehydration",
                // Symptoms
                nausea: "Nausea",
                vomiting: "Vomiting",
                lightSensitivity: "Light Sensitivity",
                soundSensitivity: "Sound Sensitivity",
                dizziness: "Dizziness",
                fatigue: "Fatigue",
                confusion: "Confusion",
                moodChanges: "Mood Changes",
                // Analytics
                analyticsTitle: "Analytics & Insights",
                analyticsSubtitle: "Understand your migraine patterns and triggers",
                treatmentEffectiveness: "Treatment Effectiveness Report",
                medications: "Medications",
                nonPharmacological: "Non-Pharmacological Interventions",
                highlyEffective: "Highly Effective",
                moderatelyEffective: "Moderately Effective",
                usedTimes: "Used {count} times",
                providedRelief: "provided relief in {percent}% of cases when used ({used}/{total} times).",
                doctorReport: "Exportable Doctor's Report",
                doctorReportDesc: "Generate a comprehensive, professional report for your healthcare provider that includes all your migraine data, patterns, and treatment responses.",
                reportIncludes: "Report will include:",
                generateReport: "Generate PDF Report",
                emailDoctor: "Email to Doctor",
                // Settings
                settingsTitle: "Settings & Personalization",
                settingsSubtitle: "Customize your migraine tracking experience",
                myMedications: "My Medications",
                acuteMedications: "Acute/Abortive Medications",
                remove: "Remove",
                addMedication: "Add Medication",
                // Alerts
                quickEntrySaved: "Quick entry saved! You can add more details later when you feel better.",
                detailedEntrySaved: "Detailed migraine entry saved successfully!",
                reportGenerated: "Report generated and downloaded!",
                noDataReport: "No migraine data available to generate a report. Please log some migraines first.",
                enterDoctorEmail: "Enter your doctor's email address:",
                exportData: "Export Data (CSV)",
                language: "Language"
            },
            hi: {
                appTitle: "‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§ü‡•ç‡§∞‡•à‡§ï‡§∞",
                dashboard: "‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
                analytics: "‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£",
                settings: "‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏",
                welcomeBack: "‡§µ‡§æ‡§™‡§∏ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à! üëã",
                welcomeSubtitle: "‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§¶‡•É‡§∑‡•ç‡§ü‡§ø ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ö‡§™‡§®‡•á ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§ï‡•ã ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç",
                migraineFree: "‡§¶‡§ø‡§® ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§®-‡§Æ‡•Å‡§ï‡•ç‡§§",
                lastEntry: "‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø: 2 ‡§¶‡§ø‡§® ‡§™‡§π‡§≤‡•á",
                thisMonth: "‡§á‡§∏ ‡§Æ‡§π‡•Ä‡§®‡•á",
                avgIntensity: "‡§î‡§∏‡§§ ‡§§‡•Ä‡§µ‡•ç‡§∞‡§§‡§æ",
                topTrigger: "‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ï‡§æ‡§∞‡§£",
                fromLastMonth: "‡§™‡§ø‡§õ‡§≤‡•á ‡§Æ‡§π‡•Ä‡§®‡•á ‡§∏‡•á",
                mildSeverity: "‡§π‡§≤‡•ç‡§ï‡•Ä ‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ",
                moderateSeverity: "‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ",
                highSeverity: "‡§â‡§ö‡•ç‡§ö ‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ",
                correlation: "‡§∏‡§Ç‡§¨‡§Ç‡§ß",
                noData: "‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à ‡§°‡•á‡§ü‡§æ ‡§®‡§π‡•Ä‡§Ç",
                havingMigraine: "‡§Ö‡§≠‡•Ä ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à?",
                chooseMigraine: "‡§Ö‡§™‡§®‡•á ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§è‡§™‡§ø‡§∏‡•ã‡§° ‡§ï‡•ã ‡§≤‡•â‡§ó ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§§‡§∞‡•Ä‡§ï‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç",
                quickLog: "‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§≤‡•â‡§ó (1 ‡§Æ‡§ø‡§®‡§ü)",
                detailedEntry: "‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø",
                quickTime: "‡§§‡•ç‡§µ‡§∞‡§ø‡§§: 1 ‡§Æ‡§ø‡§®‡§ü",
                detailedTime: "‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§: 3-5 ‡§Æ‡§ø‡§®‡§ü",
                recentEntries: "‡§π‡§æ‡§≤ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø‡§Ø‡§æ‡§Ç",
                recentSubtitle: "‡§Ü‡§™‡§ï‡•á ‡§®‡§µ‡•Ä‡§®‡§§‡§Æ ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§≤‡•â‡§ó ‡§î‡§∞ ‡§™‡•à‡§ü‡§∞‡•ç‡§®",
                noEntries: "‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø ‡§®‡§π‡•Ä‡§Ç‡•§ ‡§ä‡§™‡§∞ ‡§Ö‡§™‡§®‡§æ ‡§™‡§π‡§≤‡§æ ‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶ ‡§≤‡•â‡§ó ‡§ï‡§∞‡•á‡§Ç!",
                painLevel: "‡§¶‡§∞‡•ç‡§¶ ‡§ï‡§æ ‡§∏‡•ç‡§§‡§∞",
                complete: "‡§™‡•Ç‡§∞‡•ç‡§£",
                incomplete: "‡§Ö‡§ß‡•Ç‡§∞‡§æ",
                location: "‡§∏‡•ç‡§•‡§æ‡§®",
                quickLogTitle: "‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§≤‡•â‡§ó",
                quickLogSubtitle: "‡§Ö‡§≠‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§¨‡§æ‡§§‡•á‡§Ç ‡§≤‡•â‡§ó ‡§ï‡§∞‡•á‡§Ç, ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡•á‡§Ç",
                whenStart: "‡§Ø‡§π ‡§ï‡§¨ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•Å‡§Ü?",
                now: "‡§Ö‡§≠‡•Ä",
                minsAgo: "‡§Æ‡§ø‡§®‡§ü ‡§™‡§π‡§≤‡•á",
                painIntensity: "‡§¶‡§∞‡•ç‡§¶ ‡§ï‡•Ä ‡§§‡•Ä‡§µ‡•ç‡§∞‡§§‡§æ",
                mild: "‡§π‡§≤‡•ç‡§ï‡§æ",
                moderate: "‡§Æ‡§ß‡•ç‡§Ø‡§Æ",
                severe: "‡§ó‡§Ç‡§≠‡•Ä‡§∞",
                worst: "‡§∏‡§¨‡§∏‡•á ‡§ñ‡§∞‡§æ‡§¨",
                cancel: "‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç",
                saveNow: "‡§Ö‡§≠‡•Ä ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç",
                detailedEntryTitle: "‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø",
                detailedEntrySubtitle: "‡§∏‡§≠‡•Ä ‡§µ‡§ø‡§µ‡§∞‡§£‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§≤‡•â‡§ó",
                painLocation: "‡§¶‡§∞‡•ç‡§¶ ‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§®",
                possibleTriggers: "‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§æ‡§∞‡§£",
                associatedSymptoms: "‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§≤‡§ï‡•ç‡§∑‡§£",
                saveCompleteEntry: "‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç",
                // Pain locations
                leftSide: "‡§¨‡§æ‡§à‡§Ç ‡§ì‡§∞",
                rightSide: "‡§¶‡§æ‡§à‡§Ç ‡§ì‡§∞",
                bothSides: "‡§¶‡•ã‡§®‡•ã‡§Ç ‡§ì‡§∞",
                forehead: "‡§Æ‡§æ‡§•‡§æ",
                backHead: "‡§∏‡§ø‡§∞ ‡§ï‡§æ ‡§™‡§ø‡§õ‡§≤‡§æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ",
                topHead: "‡§∏‡§ø‡§∞ ‡§ï‡§æ ‡§ä‡§™‡§∞‡•Ä ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ",
                // Triggers
                workStress: "‡§ï‡§æ‡§Æ ‡§ï‡§æ ‡§§‡§®‡§æ‡§µ",
                lackSleep: "‡§®‡•Ä‡§Ç‡§¶ ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä",
                weatherChange: "‡§Æ‡•å‡§∏‡§Æ ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡§æ‡§µ",
                brightLights: "‡§§‡•á‡§ú ‡§∞‡•ã‡§∂‡§®‡•Ä",
                loudSounds: "‡§§‡•á‡§ú ‡§Ü‡§µ‡§æ‡§ú",
                certainFoods: "‡§ï‡•Å‡§õ ‡§ñ‡§æ‡§¶‡•ç‡§Ø ‡§™‡§¶‡§æ‡§∞‡•ç‡§•",
                hormonal: "‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§®‡§≤ ‡§¨‡§¶‡§≤‡§æ‡§µ",
                dehydration: "‡§®‡§ø‡§∞‡•ç‡§ú‡§≤‡•Ä‡§ï‡§∞‡§£",
                // Symptoms
                nausea: "‡§Æ‡§§‡§≤‡•Ä",
                vomiting: "‡§â‡§≤‡•ç‡§ü‡•Ä",
                lightSensitivity: "‡§™‡•ç‡§∞‡§ï‡§æ‡§∂ ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤‡§§‡§æ",
                soundSensitivity: "‡§ß‡•ç‡§µ‡§®‡§ø ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤‡§§‡§æ",
                dizziness: "‡§ö‡§ï‡•ç‡§ï‡§∞ ‡§Ü‡§®‡§æ",
                fatigue: "‡§•‡§ï‡§æ‡§®",
                confusion: "‡§≠‡•ç‡§∞‡§Æ",
                moodChanges: "‡§Æ‡•Ç‡§° ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡§æ‡§µ",
                // Analytics
                analyticsTitle: "‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§î‡§∞ ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§¶‡•É‡§∑‡•ç‡§ü‡§ø",
                analyticsSubtitle: "‡§Ö‡§™‡§®‡•á ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§™‡•à‡§ü‡§∞‡•ç‡§® ‡§î‡§∞ ‡§ï‡§æ‡§∞‡§£‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§Æ‡§ù‡•á‡§Ç",
                treatmentEffectiveness: "‡§â‡§™‡§ö‡§æ‡§∞ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§∂‡•Ä‡§≤‡§§‡§æ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü",
                medications: "‡§¶‡§µ‡§æ‡§è‡§Ç",
                nonPharmacological: "‡§ó‡•à‡§∞-‡§¶‡§µ‡§æ ‡§π‡§∏‡•ç‡§§‡§ï‡•ç‡§∑‡•á‡§™",
                highlyEffective: "‡§Ö‡§§‡•ç‡§Ø‡§ß‡§ø‡§ï ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä",
                moderatelyEffective: "‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä",
                usedTimes: "{count} ‡§¨‡§æ‡§∞ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ",
                providedRelief: "‡§®‡•á {percent}% ‡§Æ‡§æ‡§Æ‡§≤‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∞‡§æ‡§π‡§§ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡•Ä ‡§ú‡§¨ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ({used}/{total} ‡§¨‡§æ‡§∞)‡•§",
                doctorReport: "‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§ ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§ï‡•Ä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü",
                doctorReportDesc: "‡§Ö‡§™‡§®‡•á ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§µ‡•ç‡§Ø‡§æ‡§™‡§ï, ‡§™‡•á‡§∂‡•á‡§µ‡§∞ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§∏‡§≠‡•Ä ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§°‡•á‡§ü‡§æ, ‡§™‡•à‡§ü‡§∞‡•ç‡§® ‡§î‡§∞ ‡§â‡§™‡§ö‡§æ‡§∞ ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§è‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç‡•§",
                reportIncludes: "‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§ó‡§æ:",
                generateReport: "‡§™‡•Ä‡§°‡•Ä‡§è‡§´ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç",
                emailDoctor: "‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§ï‡•ã ‡§à‡§Æ‡•á‡§≤ ‡§ï‡§∞‡•á‡§Ç",
                // Settings
                settingsTitle: "‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§î‡§∞ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§‡§ï‡§∞‡§£",
                settingsSubtitle: "‡§Ö‡§™‡§®‡•á ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§ï‡•ã ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç",
                myMedications: "‡§Æ‡•á‡§∞‡•Ä ‡§¶‡§µ‡§æ‡§è‡§Ç",
                acuteMedications: "‡§§‡•Ä‡§µ‡•ç‡§∞/‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ ‡§¶‡§µ‡§æ‡§è‡§Ç",
                remove: "‡§π‡§ü‡§æ‡§è‡§Ç",
                addMedication: "‡§¶‡§µ‡§æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç",
                // Alerts
                quickEntrySaved: "‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§à! ‡§ú‡§¨ ‡§Ü‡§™ ‡§¨‡•á‡§π‡§§‡§∞ ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§ï‡§∞‡•á‡§Ç ‡§§‡•ã ‡§Ö‡§ß‡§ø‡§ï ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§ú‡•ã‡§°‡§º ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§",
                detailedEntrySaved: "‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§à!",
                reportGenerated: "‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§î‡§∞ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§à!",
                noDataReport: "‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ã‡§à ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§°‡•á‡§ü‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§ï‡•Å‡§õ ‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§® ‡§≤‡•â‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§",
                enterDoctorEmail: "‡§Ö‡§™‡§®‡•á ‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§ï‡§æ ‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç:",
                exportData: "‡§°‡•á‡§ü‡§æ ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç (CSV)",
                language: "‡§≠‡§æ‡§∑‡§æ"
            }
        };

        // Global state
        let currentLanguage = localStorage.getItem('language') || 'en';
        let currentView = 'dashboard';
        let migraines = [];

        // Data persistence functions
        function loadMigraines() {
            try {
                const stored = localStorage.getItem('migraines');
                if (stored) {
                    migraines = JSON.parse(stored).map(m => ({
                        ...m,
                        startTime: new Date(m.startTime),
                        timestamp: new Date(m.timestamp)
                    }));
                } else {
                    // Initialize with sample data for demo
                    initializeSampleData();
                }
            } catch (error) {
                console.error('Error loading migraines:', error);
                initializeSampleData();
            }
        }

        function saveMigraines() {
            try {
                localStorage.setItem('migraines', JSON.stringify(migraines));
            } catch (error) {
                console.error('Error saving migraines:', error);
                alert('Error saving data. Storage might be full.');
            }
        }

        function initializeSampleData() {
            const now = new Date();
            migraines = [
                {
                    id: generateId(),
                    timestamp: new Date(now.getTime() - 2 * 24 * 60 * 60 * 1000),
                    startTime: new Date(now.getTime() - 2 * 24 * 60 * 60 * 1000),
                    endTime: new Date(now.getTime() - 2 * 24 * 60 * 60 * 1000 + 4 * 60 * 60 * 1000),
                    painLevel: 7,
                    status: 'complete',
                    locations: ['left_side', 'forehead'],
                    triggers: ['work_stress', 'lack_sleep'],
                    symptoms: ['nausea', 'photophobia'],
                    medications: ['Sumatriptan 50mg'],
                    effectiveness: 75,
                    notes: 'Started during work meeting'
                },
                {
                    id: generateId(),
                    timestamp: new Date(now.getTime() - 5 * 24 * 60 * 60 * 1000),
                    startTime: new Date(now.getTime() - 5 * 24 * 60 * 60 * 1000),
                    endTime: new Date(now.getTime() - 5 * 24 * 60 * 60 * 1000 + 6 * 60 * 60 * 1000),
                    painLevel: 5,
                    status: 'complete',
                    locations: ['both_sides'],
                    triggers: ['weather_change'],
                    symptoms: ['dizziness'],
                    medications: ['Ibuprofen 400mg'],
                    effectiveness: 50,
                    notes: 'Weather front moving in'
                },
                {
                    id: generateId(),
                    timestamp: new Date(now.getTime() - 8 * 24 * 60 * 60 * 1000),
                    startTime: new Date(now.getTime() - 8 * 24 * 60 * 60 * 1000),
                    endTime: new Date(now.getTime() - 8 * 24 * 60 * 60 * 1000 + 3 * 60 * 60 * 1000),
                    painLevel: 6,
                    status: 'complete',
                    locations: ['right_side'],
                    triggers: ['bright_lights', 'dehydration'],
                    symptoms: ['nausea', 'photophobia'],
                    medications: ['Sumatriptan 50mg'],
                    effectiveness: 80,
                    notes: 'After long screen time'
                },
                {
                    id: generateId(),
                    timestamp: new Date(now.getTime() - 15 * 24 * 60 * 60 * 1000),
                    startTime: new Date(now.getTime() - 15 * 24 * 60 * 60 * 1000),
                    endTime: new Date(now.getTime() - 15 * 24 * 60 * 60 * 1000 + 5 * 60 * 60 * 1000),
                    painLevel: 8,
                    status: 'complete',
                    locations: ['left_side', 'back_head'],
                    triggers: ['hormonal', 'lack_sleep'],
                    symptoms: ['nausea', 'vomiting', 'photophobia'],
                    medications: ['Sumatriptan 50mg'],
                    effectiveness: 70,
                    notes: 'Severe episode'
                },
                {
                    id: generateId(),
                    timestamp: new Date(now.getTime() - 22 * 24 * 60 * 60 * 1000),
                    startTime: new Date(now.getTime() - 22 * 24 * 60 * 60 * 1000),
                    endTime: new Date(now.getTime() - 22 * 24 * 60 * 60 * 1000 + 2 * 60 * 60 * 1000),
                    painLevel: 4,
                    status: 'complete',
                    locations: ['forehead'],
                    triggers: ['certain_foods'],
                    symptoms: ['fatigue'],
                    medications: ['Ibuprofen 400mg'],
                    effectiveness: 60,
                    notes: 'After eating chocolate'
                }
            ];
            saveMigraines();
        }

        function generateId() {
            return Date.now().toString() + Math.random().toString(36).substr(2, 9);
        }

        // Analytics functions
        function getWeeklyData() {
            const now = new Date();
            const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
            return migraines.filter(m => m.startTime >= weekAgo);
        }

        function getMonthlyData() {
            const now = new Date();
            const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
            return migraines.filter(m => m.startTime >= monthAgo);
        }

        function getThisMonthData() {
            const now = new Date();
            const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);
            return migraines.filter(m => m.startTime >= startOfMonth);
        }

        function getLastMonthData() {
            const now = new Date();
            const startOfLastMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);
            const endOfLastMonth = new Date(now.getFullYear(), now.getMonth(), 0);
            return migraines.filter(m => m.startTime >= startOfLastMonth && m.startTime <= endOfLastMonth);
        }

        function calculateAverageIntensity(data) {
            if (data.length === 0) return 0;
            return (data.reduce((sum, m) => sum + m.painLevel, 0) / data.length).toFixed(1);
        }

        function getMostCommonTrigger(data) {
            if (data.length === 0) return 'No data';
            
            const triggerCounts = {};
            data.forEach(m => {
                if (m.triggers) {
                    m.triggers.forEach(trigger => {
                        triggerCounts[trigger] = (triggerCounts[trigger] || 0) + 1;
                    });
                }
            });

            const mostCommon = Object.entries(triggerCounts).sort((a, b) => b[1] - a[1])[0];
            return mostCommon ? mostCommon[0] : 'No data';
        }

        function getDaysSinceLast() {
            if (migraines.length === 0) return 0;
            
            const sortedMigraines = [...migraines].sort((a, b) => b.startTime - a.startTime);
            const lastMigraine = sortedMigraines[0];
            const now = new Date();
            const diffTime = Math.abs(now - lastMigraine.startTime);
            return Math.floor(diffTime / (1000 * 60 * 60 * 24));
        }

        // Translation function
        function t(key, params = {}) {
            let text = translations[currentLanguage][key] || translations.en[key] || key;
            Object.keys(params).forEach(param => {
                text = text.replace(`{${param}}`, params[param]);
            });
            return text;
        }

        // Update UI text based on current language
        function updateLanguage() {
            const isHindi = currentLanguage === 'hi';
            
            // Update language select
            document.getElementById('language-select').value = currentLanguage;
            
            // Add/remove Hindi font class
            document.body.classList.toggle('hindi-font', isHindi);
            
            // Update all text elements
            const textElements = {
                'app-title': 'appTitle',
                'welcome-title': 'welcomeBack',
                'welcome-subtitle': 'welcomeSubtitle',
                'migraine-free-text': 'migraineFree',
                'last-entry-text': 'lastEntry',
                'this-month-label': 'thisMonth',
                'avg-intensity-label': 'avgIntensity',
                'top-trigger-label': 'topTrigger',
                'having-migraine-text': 'havingMigraine',
                'choose-migraine-text': 'chooseMigraine',
                'quick-log-text': 'quickLog',
                'detailed-entry-text': 'detailedEntry',
                'quick-time-text': 'quickTime',
                'detailed-time-text': 'detailedTime',
                'recent-entries-title': 'recentEntries',
                'recent-entries-subtitle': 'recentSubtitle',
                'analytics-title': 'analyticsTitle',
                'analytics-subtitle': 'analyticsSubtitle',
                'treatment-effectiveness-title': 'treatmentEffectiveness',
                'medications-title': 'medications',
                'non-pharma-title': 'nonPharmacological',
                'highly-effective': 'highlyEffective',
                'moderately-effective': 'moderatelyEffective',
                'doctor-report-title': 'doctorReport',
                'doctor-report-desc': 'doctorReportDesc',
                'report-includes-title': 'reportIncludes',
                'generate-report-text': 'generateReport',
                'email-doctor-text': 'emailDoctor',
                'export-data-text': 'exportData',
                'settings-title': 'settingsTitle',
                'settings-subtitle': 'settingsSubtitle',
                'my-medications-title': 'myMedications',
                'acute-medications-title': 'acuteMedications',
                'add-medication-text': 'addMedication',
                'quick-log-modal-title': 'quickLogTitle',
                'quick-log-modal-subtitle': 'quickLogSubtitle',
                'when-start-label': 'whenStart',
                'pain-intensity-label': 'painIntensity',
                'detailed-modal-title': 'detailedEntryTitle',
                'detailed-modal-subtitle': 'detailedEntrySubtitle',
                'detailed-pain-label': 'painIntensity',
                'pain-location-label': 'painLocation',
                'possible-triggers-label': 'possibleTriggers',
                'associated-symptoms-label': 'associatedSymptoms'
            };

            Object.entries(textElements).forEach(([elementId, translationKey]) => {
                const element = document.getElementById(elementId);
                if (element) {
                    element.textContent = t(translationKey);
                }
            });

            // Update navigation buttons
            const navTexts = document.querySelectorAll('.nav-text');
            navTexts[0].textContent = t('dashboard');
            navTexts[1].textContent = t('analytics');
            navTexts[2].textContent = t('settings');

            // Update modal buttons
            const timeButtons = {
                'time-now': 'now',
                'time-5min': '5 ' + t('minsAgo'),
                'time-15min': '15 ' + t('minsAgo'),
                'time-30min': '30 ' + t('minsAgo')
            };

            Object.entries(timeButtons).forEach(([elementId, text]) => {
                const element = document.getElementById(elementId);
                if (element) element.textContent = text;
            });

            // Update pain level labels
            document.getElementById('mild-label').innerHTML = `1<br/>${t('mild')}`;
            document.getElementById('moderate-label').innerHTML = `4<br/>${t('moderate')}`;
            document.getElementById('severe-label').innerHTML = `7<br/>${t('severe')}`;
            document.getElementById('worst-label').innerHTML = `10<br/>${t('worst')}`;

            // Update location buttons
            const locationButtons = {
                'loc-left': 'leftSide',
                'loc-right': 'rightSide',
                'loc-both': 'bothSides',
                'loc-forehead': 'forehead',
                'loc-back': 'backHead',
                'loc-top': 'topHead'
            };

            Object.entries(locationButtons).forEach(([elementId, translationKey]) => {
                const element = document.getElementById(elementId);
                if (element) element.textContent = t(translationKey);
            });

            // Update trigger buttons
            const triggerButtons = {
                'trig-work': 'workStress',
                'trig-sleep': 'lackSleep',
                'trig-weather': 'weatherChange',
                'trig-lights': 'brightLights',
                'trig-sounds': 'loudSounds',
                'trig-foods': 'certainFoods',
                'trig-hormonal': 'hormonal',
                'trig-dehydration': 'dehydration'
            };

            Object.entries(triggerButtons).forEach(([elementId, translationKey]) => {
                const element = document.getElementById(elementId);
                if (element) element.textContent = t(translationKey);
            });

            // Update symptom buttons
            const symptomButtons = {
                'symp-nausea': 'nausea',
                'symp-vomiting': 'vomiting',
                'symp-light': 'lightSensitivity',
                'symp-sound': 'soundSensitivity',
                'symp-dizziness': 'dizziness',
                'symp-fatigue': 'fatigue',
                'symp-confusion': 'confusion',
                'symp-mood': 'moodChanges'
            };

            Object.entries(symptomButtons).forEach(([elementId, translationKey]) => {
                const element = document.getElementById(elementId);
                if (element) element.textContent = t(translationKey);
            });

            // Update cancel and save buttons
            document.getElementById('quick-log-cancel').textContent = t('cancel');
            document.getElementById('quick-log-save').textContent = t('saveNow');
            document.getElementById('detailed-cancel').textContent = t('cancel');
            document.getElementById('detailed-save').textContent = t('saveCompleteEntry');

            // Update remove buttons
            const removeButtons = document.querySelectorAll('[id^="remove-btn"]');
            removeButtons.forEach(btn => btn.textContent = t('remove'));
        }

        // Navigation functionality
        function showView(viewName) {
            // Hide all views
            document.getElementById('dashboard-view').classList.add('hidden');
            document.getElementById('analytics-view').classList.add('hidden');
            document.getElementById('settings-view').classList.add('hidden');

            // Show selected view
            document.getElementById(viewName + '-view').classList.remove('hidden');

            // Update navigation buttons
            document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
            document.getElementById('nav-' + viewName).classList.add('active');

            currentView = viewName;
        }

        // Modal functionality
        function showModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        // Selection button functionality
        function setupSelectionButtons() {
            // Time selection buttons
            document.querySelectorAll('[data-time]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('[data-time]').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    
                    // Auto-fill date/time inputs based on selection
                    const now = new Date();
                    let targetTime = new Date(now);
                    
                    switch(btn.dataset.time) {
                        case '5min': targetTime = new Date(now.getTime() - 5 * 60000); break;
                        case '15min': targetTime = new Date(now.getTime() - 15 * 60000); break;
                        case '30min': targetTime = new Date(now.getTime() - 30 * 60000); break;
                    }
                    
                    // Update quick log inputs
                    const quickDate = document.getElementById('quick-date');
                    const quickTime = document.getElementById('quick-time');
                    if (quickDate) quickDate.value = targetTime.toISOString().split('T')[0];
                    if (quickTime) quickTime.value = targetTime.toTimeString().slice(0, 5);
                });
            });

            // Location selection buttons
            document.querySelectorAll('[data-location]').forEach(btn => {
                btn.addEventListener('click', () => {
                    btn.classList.toggle('selected');
                });
            });

            // Character selection buttons
            document.querySelectorAll('[data-character]').forEach(btn => {
                btn.addEventListener('click', () => {
                    btn.classList.toggle('selected');
                });
            });

            // Trigger selection buttons
            document.querySelectorAll('[data-trigger]').forEach(btn => {
                btn.addEventListener('click', () => {
                    btn.classList.toggle('selected');
                });
            });

            // Symptom selection buttons
            document.querySelectorAll('[data-symptom]').forEach(btn => {
                btn.addEventListener('click', () => {
                    btn.classList.toggle('selected');
                });
            });

            // Relief method buttons
            document.querySelectorAll('[data-relief]').forEach(btn => {
                btn.addEventListener('click', () => {
                    btn.classList.toggle('selected');
                    // Show effectiveness section if any relief method is selected
                    const selectedReliefs = document.querySelectorAll('[data-relief].selected');
                    const effectivenessSection = document.getElementById('effectiveness-section');
                    if (selectedReliefs.length > 0) {
                        effectivenessSection.classList.remove('hidden');
                    } else {
                        effectivenessSection.classList.add('hidden');
                    }
                });
            });

            // Aura buttons
            document.querySelectorAll('[data-aura]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('[data-aura]').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    
                    const auraDetails = document.getElementById('aura-details');
                    if (btn.dataset.aura === 'yes') {
                        auraDetails.classList.remove('hidden');
                    } else {
                        auraDetails.classList.add('hidden');
                    }
                });
            });

            // Aura type buttons
            document.querySelectorAll('[data-aura-type]').forEach(btn => {
                btn.addEventListener('click', () => {
                    btn.classList.toggle('selected');
                });
            });
        }

        // Pain slider functionality
        function setupPainSliders() {
            const quickSlider = document.getElementById('pain-slider');
            const quickDisplay = document.getElementById('pain-level-display');
            const detailedSlider = document.getElementById('detailed-pain-slider');
            const detailedDisplay = document.getElementById('detailed-pain-display');
            const effectivenessSlider = document.getElementById('effectiveness-slider');
            const effectivenessDisplay = document.getElementById('effectiveness-display');

            if (quickSlider && quickDisplay) {
                quickSlider.addEventListener('input', (e) => {
                    quickDisplay.textContent = e.target.value;
                });
            }

            if (detailedSlider && detailedDisplay) {
                detailedSlider.addEventListener('input', (e) => {
                    detailedDisplay.textContent = e.target.value + '/10';
                });
            }

            if (effectivenessSlider && effectivenessDisplay) {
                effectivenessSlider.addEventListener('input', (e) => {
                    effectivenessDisplay.textContent = e.target.value + '%';
                });
            }
        }

        // Save migraine data
        function saveMigraine(data) {
            const migraine = {
                id: generateId(),
                timestamp: new Date(),
                ...data
            };
            migraines.push(migraine);
            saveMigraines();
            updateDashboard();
            updateRecentEntries();
        }

        // Update dashboard statistics
        function updateDashboard() {
            const thisMonthData = getThisMonthData();
            const lastMonthData = getLastMonthData();
            const monthlyData = getMonthlyData();
            
            // Update this month count
            document.getElementById('this-month-count').textContent = thisMonthData.length;
            
            // Update trend
            const trendDiff = thisMonthData.length - lastMonthData.length;
            const trendIcon = document.getElementById('trend-icon');
            const trendText = document.getElementById('trend-text');
            
            if (trendDiff > 0) {
                trendIcon.textContent = 'üìà';
                trendText.textContent = `+${trendDiff} from last month`;
                trendText.parentElement.className = 'text-xs mt-2 flex items-center text-red-600';
            } else if (trendDiff < 0) {
                trendIcon.textContent = 'üìâ';
                trendText.textContent = `${trendDiff} from last month`;
                trendText.parentElement.className = 'text-xs mt-2 flex items-center text-green-600';
            } else {
                trendIcon.textContent = 'üìä';
                trendText.textContent = 'Same as last month';
                trendText.parentElement.className = 'text-xs mt-2 flex items-center text-gray-600';
            }
            
            // Update average intensity
            const avgIntensity = calculateAverageIntensity(monthlyData);
            document.getElementById('avg-intensity-value').textContent = avgIntensity;
            
            const severityText = document.getElementById('severity-text');
            if (avgIntensity == 0) {
                severityText.textContent = t('noData');
            } else if (avgIntensity <= 3) {
                severityText.textContent = t('mildSeverity');
            } else if (avgIntensity <= 6) {
                severityText.textContent = t('moderateSeverity');
            } else {
                severityText.textContent = t('highSeverity');
            }
            
            // Update top trigger
            const topTrigger = getMostCommonTrigger(monthlyData);
            const topTriggerElement = document.getElementById('top-trigger-value');
            const correlationElement = document.getElementById('correlation-text');
            
            if (topTrigger === 'No data') {
                topTriggerElement.textContent = t('noData');
                correlationElement.textContent = t('noData');
            } else {
                // Translate trigger name
                const triggerTranslations = {
                    'work_stress': t('workStress'),
                    'lack_sleep': t('lackSleep'),
                    'weather_change': t('weatherChange'),
                    'bright_lights': t('brightLights'),
                    'loud_sounds': t('loudSounds'),
                    'certain_foods': t('certainFoods'),
                    'hormonal': t('hormonal'),
                    'dehydration': t('dehydration')
                };
                
                topTriggerElement.textContent = triggerTranslations[topTrigger] || topTrigger;
                
                // Calculate correlation percentage
                const triggerCount = monthlyData.filter(m => m.triggers && m.triggers.includes(topTrigger)).length;
                const correlation = Math.round((triggerCount / monthlyData.length) * 100);
                correlationElement.textContent = `${correlation}% ${t('correlation')}`;
            }
            
            // Update migraine-free days
            const daysSince = getDaysSinceLast();
            const migraineFreeElement = document.getElementById('migraine-free-text');
            migraineFreeElement.textContent = `${daysSince} ${t('migraineFree')}`;
        }

        // Update recent entries list
        function updateRecentEntries() {
            const recentList = document.getElementById('recent-entries-list');
            const recentMigraines = [...migraines]
                .sort((a, b) => b.startTime - a.startTime)
                .slice(0, 5);
            
            if (recentMigraines.length === 0) {
                recentList.innerHTML = `
                    <div class="p-6 text-center text-gray-500">
                        <p>${t('noEntries')}</p>
                    </div>
                `;
                return;
            }
            
            recentList.innerHTML = recentMigraines.map(migraine => {
                const date = migraine.startTime.toLocaleDateString();
                const time = migraine.startTime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                const locationText = migraine.locations ? 
                    migraine.locations.map(loc => {
                        const locationTranslations = {
                            'left_side': t('leftSide'),
                            'right_side': t('rightSide'),
                            'both_sides': t('bothSides'),
                            'forehead': t('forehead'),
                            'back_head': t('backHead'),
                            'top_head': t('topHead')
                        };
                        return locationTranslations[loc] || loc;
                    }).join(', ') : '';
                
                const statusClass = migraine.status === 'complete' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800';
                const statusText = migraine.status === 'complete' ? t('complete') : t('incomplete');
                
                return `
                    <div class="p-6 hover:bg-gray-50 transition-colors">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="font-semibold text-gray-900">${t('painLevel')} ${migraine.painLevel}/10</span>
                                    <span class="px-3 py-1 rounded-full text-xs font-medium ${statusClass}">${statusText}</span>
                                </div>
                                <div class="text-sm text-gray-600">
                                    ${date} at ${time}
                                </div>
                                ${locationText ? `<div class="text-sm text-gray-500 mt-1">${t('location')}: ${locationText}</div>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Generate doctor report
        function generateDoctorReport() {
            if (migraines.length === 0) {
                alert(t('noDataReport'));
                return;
            }

            const thisMonthData = getThisMonthData();
            const lastMonthData = getLastMonthData();
            const monthlyData = getMonthlyData();
            const avgIntensity = calculateAverageIntensity(monthlyData);
            
            // Calculate trigger frequencies
            const triggerCounts = {};
            monthlyData.forEach(m => {
                if (m.triggers) {
                    m.triggers.forEach(trigger => {
                        triggerCounts[trigger] = (triggerCounts[trigger] || 0) + 1;
                    });
                }
            });
            
            // Calculate medication effectiveness
            const medicationStats = {};
            migraines.forEach(m => {
                if (m.medications && m.effectiveness !== null && m.effectiveness !== undefined) {
                    m.medications.forEach(med => {
                        if (!medicationStats[med]) {
                            medicationStats[med] = { total: 0, effectiveness: 0, count: 0 };
                        }
                        medicationStats[med].total += m.effectiveness;
                        medicationStats[med].count += 1;
                        medicationStats[med].effectiveness = medicationStats[med].total / medicationStats[med].count;
                    });
                }
            });

            const reportContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Migraine Medical Report</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; color: #333; }
                        .header { text-align: center; border-bottom: 3px solid #6366f1; padding-bottom: 20px; margin-bottom: 30px; }
                        .header h1 { color: #6366f1; margin: 0; font-size: 24px; }
                        .section { margin-bottom: 30px; page-break-inside: avoid; }
                        .section h2 { color: #4f46e5; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px; margin-bottom: 15px; }
                        .section h3 { color: #6b7280; margin-bottom: 10px; }
                        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
                        .stat-box { background: #f8fafc; border: 1px solid #e2e8f0; padding: 15px; border-radius: 8px; }
                        .stat-value { font-size: 24px; font-weight: bold; color: #1e40af; }
                        .stat-label { font-size: 12px; color: #64748b; text-transform: uppercase; }
                        .migraine-entry { background: #fafafa; border-left: 4px solid #ef4444; padding: 15px; margin: 10px 0; border-radius: 4px; }
                        .entry-header { font-weight: bold; color: #dc2626; margin-bottom: 8px; }
                        .entry-details { font-size: 14px; color: #4b5563; }
                        .medication-item { background: #f0f9ff; border: 1px solid #bae6fd; padding: 10px; margin: 5px 0; border-radius: 4px; }
                        .effectiveness-bar { height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden; margin-top: 5px; }
                        .effectiveness-fill { height: 100%; background: linear-gradient(to right, #ef4444, #f59e0b, #10b981); }
                        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
                        th, td { border: 1px solid #d1d5db; padding: 8px; text-align: left; }
                        th { background: #f3f4f6; font-weight: bold; }
                        .trigger-item { display: inline-block; background: #fef3c7; color: #92400e; padding: 4px 8px; margin: 2px; border-radius: 12px; font-size: 12px; }
                        @media print { body { margin: 20px; } .section { page-break-inside: avoid; } }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>üß† MIGRAINE TRACKER - COMPREHENSIVE MEDICAL REPORT</h1>
                        <p><strong>Report Generated:</strong> ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}</p>
                        <p><strong>Reporting Period:</strong> ${migraines.length > 0 ? migraines[migraines.length - 1].startTime.toLocaleDateString() : 'N/A'} - ${new Date().toLocaleDateString()}</p>
                    </div>

                    <div class="section">
                        <h2>üìä EXECUTIVE SUMMARY</h2>
                        <div class="stats-grid">
                            <div class="stat-box">
                                <div class="stat-value">${migraines.length}</div>
                                <div class="stat-label">Total Episodes</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value">${thisMonthData.length}</div>
                                <div class="stat-label">This Month</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value">${avgIntensity}/10</div>
                                <div class="stat-label">Avg Intensity</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value">${getDaysSinceLast()}</div>
                                <div class="stat-label">Days Since Last</div>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <h2>üéØ TRIGGER ANALYSIS</h2>
                        <p><strong>Most Common Triggers (Last 30 Days):</strong></p>
                        ${Object.entries(triggerCounts)
                            .sort((a, b) => b[1] - a[1])
                            .slice(0, 5)
                            .map(([trigger, count]) => {
                                const percentage = Math.round((count / monthlyData.length) * 100);
                                return `<div class="trigger-item">${trigger.replace(/_/g, ' ').toUpperCase()}: ${count} episodes (${percentage}%)</div>`;
                            }).join('')}
                    </div>

                    <div class="section">
                        <h2>üíä MEDICATION EFFECTIVENESS</h2>
                        ${Object.entries(medicationStats).length > 0 ? 
                            Object.entries(medicationStats).map(([med, stats]) => `
                                <div class="medication-item">
                                    <strong>${med}</strong> - Used ${stats.count} times
                                    <div class="effectiveness-bar">
                                        <div class="effectiveness-fill" style="width: ${stats.effectiveness}%"></div>
                                    </div>
                                    <small>Average Effectiveness: ${Math.round(stats.effectiveness)}%</small>
                                </div>
                            `).join('') : 
                            '<p>No medication effectiveness data recorded.</p>'
                        }
                    </div>

                    <div class="section">
                        <h2>üìÖ RECENT MIGRAINE EPISODES</h2>
                        ${migraines.slice(-10).reverse().map(migraine => `
                            <div class="migraine-entry">
                                <div class="entry-header">
                                    ${migraine.startTime.toLocaleDateString()} at ${migraine.startTime.toLocaleTimeString()} - Pain Level: ${migraine.painLevel}/10
                                </div>
                                <div class="entry-details">
                                    ${migraine.locations ? `<strong>Location:</strong> ${migraine.locations.join(', ')}<br>` : ''}
                                    ${migraine.characters ? `<strong>Character:</strong> ${migraine.characters.join(', ')}<br>` : ''}
                                    ${migraine.triggers ? `<strong>Triggers:</strong> ${migraine.triggers.join(', ')}<br>` : ''}
                                    ${migraine.symptoms ? `<strong>Symptoms:</strong> ${migraine.symptoms.join(', ')}<br>` : ''}
                                    ${migraine.medications ? `<strong>Medications:</strong> ${migraine.medications.join(', ')}<br>` : ''}
                                    ${migraine.duration ? `<strong>Duration:</strong> ${Math.floor(migraine.duration / 60)}h ${migraine.duration % 60}m<br>` : ''}
                                    ${migraine.effectiveness ? `<strong>Treatment Effectiveness:</strong> ${migraine.effectiveness}%<br>` : ''}
                                    ${migraine.notes ? `<strong>Notes:</strong> ${migraine.notes}` : ''}
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="section">
                        <h2>üìã CLINICAL RECOMMENDATIONS</h2>
                        <ul>
                            <li><strong>Frequency Assessment:</strong> ${thisMonthData.length > lastMonthData.length ? 'Increasing frequency - consider preventive treatment' : 'Stable/decreasing frequency'}</li>
                            <li><strong>Intensity Concern:</strong> ${avgIntensity > 7 ? 'High average intensity - may need stronger acute treatment' : avgIntensity > 4 ? 'Moderate intensity - current treatment may be adequate' : 'Low intensity episodes'}</li>
                            <li><strong>Pattern Recognition:</strong> ${Object.keys(triggerCounts).length > 0 ? `Primary triggers identified: ${Object.keys(triggerCounts).slice(0, 3).join(', ')}` : 'No clear trigger patterns identified'}</li>
                            <li><strong>Treatment Response:</strong> ${Object.keys(medicationStats).length > 0 ? 'Medication effectiveness data available for review' : 'Consider tracking medication effectiveness'}</li>
                        </ul>
                    </div>

                    <div class="section">
                        <h2>‚ö†Ô∏è IMPORTANT NOTES</h2>
                        <p><em>This report is generated from patient self-reported data using a digital migraine tracking application. All information should be verified during clinical consultation. This data is intended to supplement, not replace, professional medical assessment.</em></p>
                        <p><strong>Data Accuracy:</strong> Patient-reported ‚Ä¢ <strong>Tracking Period:</strong> ${Math.ceil((new Date() - migraines[migraines.length - 1]?.startTime) / (1000 * 60 * 60 * 24))} days ‚Ä¢ <strong>Compliance:</strong> ${migraines.length} entries recorded</p>
                    </div>
                </body>
                </html>
            `;

            const blob = new Blob([reportContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `migraine-medical-report-${new Date().toISOString().split('T')[0]}.html`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);

            alert(t('reportGenerated'));
        }

        // Email report
        function emailReport() {
            const doctorEmail = prompt(t('enterDoctorEmail'), 'doctor@example.com');
            if (!doctorEmail) return;

            const subject = `Migraine Medical Report - ${new Date().toLocaleDateString()}`;
            const body = `Dear Healthcare Provider,

Please find my comprehensive migraine report. This data has been collected using a digital migraine tracking application.

MIGRAINE SUMMARY:
‚Ä¢ Total Migraines Recorded: ${migraines.length}
‚Ä¢ Average Pain Intensity: ${(migraines.reduce((sum, m) => sum + m.painLevel, 0) / migraines.length).toFixed(1)}/10

Best regards,
Your Patient`;

            const mailtoLink = `mailto:${doctorEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoLink;
        }

        // Export data as CSV
        function exportDataAsCSV() {
            if (migraines.length === 0) {
                alert(t('noDataReport'));
                return;
            }

            const headers = [
                'Date', 'Time', 'Pain Level', 'Duration (hours)', 'Status', 
                'Locations', 'Triggers', 'Symptoms', 'Medications', 'Effectiveness (%)', 'Notes'
            ];

            const csvData = migraines.map(migraine => {
                const date = migraine.startTime.toLocaleDateString();
                const time = migraine.startTime.toLocaleTimeString();
                const duration = migraine.endTime ? 
                    ((migraine.endTime - migraine.startTime) / (1000 * 60 * 60)).toFixed(1) : 'Ongoing';
                
                return [
                    date,
                    time,
                    migraine.painLevel,
                    duration,
                    migraine.status,
                    (migraine.locations || []).join('; '),
                    (migraine.triggers || []).join('; '),
                    (migraine.symptoms || []).join('; '),
                    (migraine.medications || []).join('; '),
                    migraine.effectiveness || '',
                    migraine.notes || ''
                ].map(field => `"${field}"`).join(',');
            });

            const csvContent = [headers.join(','), ...csvData].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            
            link.setAttribute('href', url);
            link.setAttribute('download', `migraine-data-${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert('CSV data exported successfully!');
        }

        // Initialize the app
        function init() {
            // Load data first
            loadMigraines();
            
            // Set up language
            updateLanguage();
            
            // Initialize forms with current date/time
            initializeForms();
            
            // Update dashboard with loaded data
            updateDashboard();
            updateRecentEntries();

            // Set up navigation
            document.getElementById('nav-dashboard').addEventListener('click', () => showView('dashboard'));
            document.getElementById('nav-analytics').addEventListener('click', () => showView('analytics'));
            document.getElementById('nav-settings').addEventListener('click', () => showView('settings'));

            // Set up language selector
            document.getElementById('language-select').addEventListener('change', (e) => {
                currentLanguage = e.target.value;
                localStorage.setItem('language', currentLanguage);
                updateLanguage();
            });

            // Set up modal triggers
            document.getElementById('quick-log-btn').addEventListener('click', () => {
                initializeForms();
                showModal('quick-log-modal');
            });
            document.getElementById('detailed-log-btn').addEventListener('click', () => {
                initializeForms();
                showModal('detailed-log-modal');
            });

            // Set up modal close buttons
            document.getElementById('quick-log-cancel').addEventListener('click', () => hideModal('quick-log-modal'));
            document.getElementById('detailed-cancel').addEventListener('click', () => hideModal('detailed-log-modal'));

            // Set up save buttons
            document.getElementById('quick-log-save').addEventListener('click', () => {
                // Get date and time
                const dateInput = document.getElementById('quick-date').value;
                const timeInput = document.getElementById('quick-time').value;
                
                let startTime;
                if (dateInput && timeInput) {
                    startTime = new Date(`${dateInput}T${timeInput}`);
                } else {
                    const selectedTime = document.querySelector('[data-time].selected')?.dataset.time || 'now';
                    startTime = new Date();
                    switch(selectedTime) {
                        case '5min': startTime = new Date(Date.now() - 5 * 60000); break;
                        case '15min': startTime = new Date(Date.now() - 15 * 60000); break;
                        case '30min': startTime = new Date(Date.now() - 30 * 60000); break;
                    }
                }

                const painLevel = parseInt(document.getElementById('pain-slider').value);
                const locations = Array.from(document.querySelectorAll('#quick-location-buttons [data-location].selected')).map(btn => btn.dataset.location);
                const characters = Array.from(document.querySelectorAll('#character-buttons [data-character].selected')).map(btn => btn.dataset.character);
                const symptoms = Array.from(document.querySelectorAll('#quick-symptom-buttons [data-symptom].selected')).map(btn => btn.dataset.symptom);

                saveMigraine({
                    startTime,
                    painLevel,
                    locations,
                    characters,
                    symptoms,
                    status: 'quick'
                });

                // Reset form
                resetQuickForm();
                hideModal('quick-log-modal');
                alert(t('quickEntrySaved'));
            });

            document.getElementById('detailed-save').addEventListener('click', () => {
                // Get date and time
                const dateInput = document.getElementById('detailed-date').value;
                const timeInput = document.getElementById('detailed-time').value;
                
                let startTime;
                if (dateInput && timeInput) {
                    startTime = new Date(`${dateInput}T${timeInput}`);
                } else {
                    startTime = new Date();
                }

                const painLevel = parseInt(document.getElementById('detailed-pain-slider').value);
                const locations = Array.from(document.querySelectorAll('#location-buttons [data-location].selected')).map(btn => btn.dataset.location);
                const characters = Array.from(document.querySelectorAll('#detailed-character-buttons [data-character].selected')).map(btn => btn.dataset.character);
                const triggers = Array.from(document.querySelectorAll('[data-trigger].selected')).map(btn => btn.dataset.trigger);
                const symptoms = Array.from(document.querySelectorAll('#symptom-buttons [data-symptom].selected')).map(btn => btn.dataset.symptom);
                const reliefMethods = Array.from(document.querySelectorAll('[data-relief].selected')).map(btn => btn.dataset.relief);
                
                // Get aura information
                const hasAura = document.querySelector('[data-aura].selected')?.dataset.aura === 'yes';
                const auraTypes = hasAura ? Array.from(document.querySelectorAll('[data-aura-type].selected')).map(btn => btn.dataset.auraType) : [];
                
                // Get medications
                const medications = [];
                if (document.getElementById('med-sumatriptan').checked) medications.push('Sumatriptan 50mg');
                if (document.getElementById('med-ibuprofen').checked) medications.push('Ibuprofen 400mg');
                if (document.getElementById('med-acetaminophen').checked) medications.push('Acetaminophen 500mg');
                if (document.getElementById('med-other').checked && document.getElementById('med-other-text').value.trim()) {
                    medications.push(document.getElementById('med-other-text').value.trim());
                }
                
                // Get effectiveness
                const effectiveness = reliefMethods.length > 0 ? parseInt(document.getElementById('effectiveness-slider').value) : null;
                
                // Get duration
                const durationHours = parseInt(document.getElementById('duration-hours').value) || 0;
                const durationMinutes = parseInt(document.getElementById('duration-minutes').value) || 0;
                const totalDurationMinutes = durationHours * 60 + durationMinutes;
                
                let endTime = null;
                if (totalDurationMinutes > 0) {
                    endTime = new Date(startTime.getTime() + totalDurationMinutes * 60000);
                }
                
                // Get notes
                const notes = document.getElementById('migraine-notes').value.trim();

                saveMigraine({
                    startTime,
                    endTime,
                    painLevel,
                    locations,
                    characters,
                    triggers,
                    symptoms,
                    hasAura,
                    auraTypes,
                    medications,
                    reliefMethods,
                    effectiveness,
                    duration: totalDurationMinutes,
                    notes,
                    status: 'complete'
                });

                // Reset form
                resetDetailedForm();
                hideModal('detailed-log-modal');
                alert(t('detailedEntrySaved'));
            });

            // Set up report buttons
            document.getElementById('generate-report-btn').addEventListener('click', generateDoctorReport);
            document.getElementById('email-doctor-btn').addEventListener('click', emailReport);
            document.getElementById('export-data-btn').addEventListener('click', exportDataAsCSV);

            // Set up selection buttons and sliders
            setupSelectionButtons();
            setupPainSliders();

            // Close modals when clicking backdrop
            document.querySelectorAll('.modal-backdrop').forEach(backdrop => {
                backdrop.addEventListener('click', (e) => {
                    if (e.target === backdrop) {
                        backdrop.classList.add('hidden');
                    }
                });
            });
        }

        // Form reset functions
        function resetQuickForm() {
            // Reset date/time to current
            const now = new Date();
            document.getElementById('quick-date').value = now.toISOString().split('T')[0];
            document.getElementById('quick-time').value = now.toTimeString().slice(0, 5);
            
            // Reset pain slider
            document.getElementById('pain-slider').value = 5;
            document.getElementById('pain-level-display').textContent = '5';
            
            // Reset selections
            document.querySelectorAll('#quick-location-buttons .selection-button').forEach(btn => btn.classList.remove('selected'));
            document.querySelectorAll('#character-buttons .selection-button').forEach(btn => btn.classList.remove('selected'));
            document.querySelectorAll('#quick-symptom-buttons .selection-button').forEach(btn => btn.classList.remove('selected'));
            
            // Reset time buttons
            document.querySelectorAll('[data-time]').forEach(btn => btn.classList.remove('selected'));
            document.getElementById('time-now').classList.add('selected');
        }

        function resetDetailedForm() {
            // Reset date/time to current
            const now = new Date();
            document.getElementById('detailed-date').value = now.toISOString().split('T')[0];
            document.getElementById('detailed-time').value = now.toTimeString().slice(0, 5);
            
            // Reset pain slider
            document.getElementById('detailed-pain-slider').value = 5;
            document.getElementById('detailed-pain-display').textContent = '5/10';
            
            // Reset effectiveness slider
            document.getElementById('effectiveness-slider').value = 50;
            document.getElementById('effectiveness-display').textContent = '50%';
            
            // Reset all selections
            document.querySelectorAll('.selection-button').forEach(btn => btn.classList.remove('selected'));
            
            // Reset checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            
            // Reset text inputs
            document.getElementById('med-other-text').value = '';
            document.getElementById('duration-hours').value = '';
            document.getElementById('duration-minutes').value = '';
            document.getElementById('migraine-notes').value = '';
            
            // Hide conditional sections
            document.getElementById('aura-details').classList.add('hidden');
            document.getElementById('effectiveness-section').classList.add('hidden');
        }

        // Initialize forms with current date/time
        function initializeForms() {
            const now = new Date();
            const dateStr = now.toISOString().split('T')[0];
            const timeStr = now.toTimeString().slice(0, 5);
            
            // Set quick form defaults
            const quickDate = document.getElementById('quick-date');
            const quickTime = document.getElementById('quick-time');
            if (quickDate) quickDate.value = dateStr;
            if (quickTime) quickTime.value = timeStr;
            
            // Set detailed form defaults
            const detailedDate = document.getElementById('detailed-date');
            const detailedTime = document.getElementById('detailed-time');
            if (detailedDate) detailedDate.value = dateStr;
            if (detailedTime) detailedTime.value = timeStr;
        }

        // Start the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'969841a855bec230',t:'MTc1NDI0OTcwOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
